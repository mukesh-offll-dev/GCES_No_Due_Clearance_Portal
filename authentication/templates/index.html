{% extends "base.html" %}

{% block content %}
<!-- TITLE -->
<div class="text-center mt-6">
    <h2 class="text-red-700 text-3xl font-bold">Student No Dues Clearance Portal</h2>
    <p class="mt-3 text-lg">
        • Welcome to the Online No Dues Clearance System, designed to make the student clearance process simple, fast, and paper-free.
    </p>
</div>

<!-- MAIN CONTAINER -->
<div class="flex flex-col md:flex-row justify-center items-start gap-10 mt-12 px-4">

    <!-- ================= Institution Login ================= -->
    <div class="border-4 border-red-600 rounded-3xl p-8 w-full max-w-md">
        <h3 class="text-center text-red-700 text-2xl font-bold mb-6">Institution Login</h3>

        <form method="POST">
            {% csrf_token %}

            <!-- Office -->
            <label class="block mb-2 font-medium">Select Office</label>
            <select name="office" id="office"
                class="w-full border rounded-full px-4 py-2 mb-4"
                onchange="toggleDepartment()">
                <option value="">Select office</option>
                <option value="library">Library Office</option>
                <option value="college">College Office</option>
                <option value="hostel">Hostel Office</option>
                <option value="faculty">Faculty Advisor</option>
                <option value="department">Department</option>
            </select>

            <!-- Department (Only for Department login) -->
            <div id="departmentDiv" class="hidden">
                <label class="block mb-2 font-medium">Select Department</label>
                <select name="department"
                    class="w-full border rounded-full px-4 py-2 mb-4">
                    <option value="">Select department</option>
                    <option value="CSE">CSE</option>
                    <option value="ECE">ECE</option>
                    <option value="EEE">EEE</option>
                    <option value="CIVIL">CIVIL</option>
                    <option value="MECH">MECH</option>
                    <option value="MCT">MCT</option>
                </select>
            </div>

            <!-- Username -->
            <label class="block mb-2 font-medium">Username</label>
            <input type="text" name="username"
                placeholder="Enter username"
                class="w-full border rounded-full px-4 py-2 mb-4">

            <!-- Password -->
            <label class="block mb-2 font-medium">Password</label>
            <input type="password" name="password"
                placeholder="Enter password"
                class="w-full border rounded-full px-4 py-2 mb-6">

            <!-- Error -->
            {% if messages %}
                {% for message in messages %}
                    <p class="text-red-600 text-center mb-3">{{ message }}</p>
                {% endfor %}
            {% endif %}

            <!-- Button -->
            <button type="submit"
                class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-3 rounded-full">
                Login
            </button>
        </form>
    </div>

    <!-- ================= Student Login ================= -->
    <div class="border-4 border-red-600 rounded-3xl p-8 w-full max-w-md">
        <h3 class="text-center text-red-700 text-2xl font-bold mb-6">Student Login</h3>

        <form method="POST" action="{% url 'student_login' %}">
  {% csrf_token %}

  <label class="block mb-2 font-medium">Student Register Number</label>
  <input type="text" name="reg_no" maxlength="12"
    placeholder="Register Number"
    class="w-full border rounded-full px-4 py-2 mb-4">

  <label class="block mb-2 font-medium">Date of Birth</label>
  <input type="date" name="dob"
    class="w-full border rounded-full px-4 py-2 mb-6">

  <button type="submit"
    class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-3 rounded-full">
    Login
  </button>
</form>
{% if request.session.student_error %}
<p id="studentError"
   class="text-red-600 font-semibold text-center mt-3">
  {{ request.session.student_error }}
</p>
{% endif %}

    </div>

</div>
<footer class="bg-gray-800 text-gray-200 mt-16">
  <div class="max-w-6xl mx-auto px-6 py-10">

    <!-- CONTACT INFO -->
    <h2 class="text-lg font-semibold mb-4 border-b border-gray-600 inline-block">
      Contact Info
    </h2>

    <ul class="space-y-3 text-sm">

      <!-- Address -->
      <li class="flex gap-3 items-start">
        <svg class="w-5 h-5 mt-0.5 text-gray-300" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C8.1 2 5 5.1 5 9c0 5.3 7 13 7 13s7-7.7 7-13c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5s2.5 1.1 2.5 2.5S13.4 11.5 12 11.5z"/>
        </svg>
        <span>
          Government College of Engineering – Srirangam,<br>
          Trichy – Madurai Highway,<br>
          Sethurappatti Road, Trichy – 620012
        </span>
      </li>

      <!-- Phone -->
      <li class="flex gap-3 items-center">
        <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6.6 10.8c1.5 2.9 3.7 5.1 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.3 1.3.4 2.7.6 4.1.6.7 0 1.3.6 1.3 1.3v3.5c0 .7-.6 1.3-1.3 1.3C10.6 21.6 2.4 13.4 2.4 3.3 2.4 2.6 3 2 3.7 2H7.2c.7 0 1.3.6 1.3 1.3 0 1.4.2 2.8.6 4.1.1.4 0 .9-.3 1.2l-2.2 2.2z"/>
        </svg>
        <span>Office – 9488008656, Hostel – 9488091653</span>
      </li>

      <!-- Email -->
      <li class="flex gap-3 items-center">
        <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 24 24">
          <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/>
        </svg>
        <span>
          <a href="mailto:principal@gces.edu.in" class="hover:underline">
            principal@gces.edu.in
          </a>,
          <a href="mailto:gcessrirangam@gmail.com" class="hover:underline">
            gcessrirangam@gmail.com
          </a>
        </span>
      </li>

    </ul>

    <!-- DEVELOPER CREDIT -->
    <div class="border-t border-gray-600 mt-8 pt-4 text-center text-xs text-gray-400">
      Developed by
      <a href="https://shorturl.at/Psd1P"
         target="_blank"
         class="text-yellow-400 font-semibold hover:underline">
        Mukesh
      </a>
    </div>

  </div>
</footer>
<!-- SCRIPT -->
<script>
function toggleDepartment() {
    const office = document.getElementById("office").value;
    const deptDiv = document.getElementById("departmentDiv");
    deptDiv.classList.toggle("hidden", office !== "department");
}

window.onload = () => {
  const err = document.getElementById("studentError");
  if (err) {
    setTimeout(() => err.style.display = "none", 3000);
  }
}
</script>
{% endblock %}


 
